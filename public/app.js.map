{"version":3,"file":"app.js","sources":["../src/data/api.js","../src/components/search.js","../src/utils/index.js","../src/components/photo.js","../src/components/thumbs.js","../src/utils/swipe.js","../src/ui.js","../src/app.js"],"sourcesContent":["// Check that the server has returned a 200 status\n// (Unlike $.ajax, fetch doesn't treat error messages from the server as failed responses)\nconst checkRes = response => {\n  if (!response.ok) {\n    throw Error(response.statusText);\n  }\n\n  return response;\n};\n\nclass API {\n  constructor(config, onLoadCallback) {\n    this.config = config;\n    this.onLoadCallback = onLoadCallback;\n    this.fetchCityWeatherImages = this.fetchCityWeatherImages.bind(this);\n  }\n\n  // Step 2/4: Load weather data for the given city\n  fetchCityWeather(query) {\n    const { key, url } = this.config.weather;\n    const endpoint = `${url}?q=${query}&appid=${key}`;\n\n    return fetch(endpoint)\n      .then(checkRes)\n      .then(res => res.json());\n  }\n\n  // Step 3/4: Load derived data (images that match the weather description)\n  fetchCityWeatherImages(json) {\n    const { key, url } = this.config.unsplash;\n    const term = json.weather[0].description;\n    const endpoint = `${url}?query=${term}&client_id=${key}`;\n\n    return fetch(endpoint)\n      .then(checkRes)\n      .then(res => res.json())\n      .then(data => ({ term, images: data.results }));\n  }\n\n  // Step 1/4: Initialise data loading\n  load(query) {\n    this.fetchCityWeather(query)\n      .then(this.fetchCityWeatherImages)\n      .then(this.onLoadCallback)\n      .catch(err => {\n        console.log(\"getCityWeather:\", err);\n      });\n  }\n}\n\nexport default API;\n","class Search {\n  constructor($el, city, loadWeatherImages) {\n    this.$el = $el;\n    this.$tf = this.$el.querySelector(\"input\");\n\n    this.$el.city.value = city;\n    this.$tf.addEventListener(\"focus\", () =>\n      this.$tf.setSelectionRange(0, 9999)\n    );\n    this.$el.addEventListener(\"submit\", this.onSubmit(loadWeatherImages));\n  }\n\n  onSubmit(loadWeatherImages) {\n    return e => {\n      e.preventDefault();\n\n      // Only search when the term is valid\n      const city = this.$el.city.value;\n      if (city.length) {\n        loadWeatherImages(city);\n      }\n    };\n  }\n}\n\nexport default Search;\n","export const clearChildren = (parent) => {\n  Array.from(parent.children).forEach(el => parent.removeChild(el));\n}\n\nexport const getConfig = ({ weather, unsplash }) => {\n  return {\n    weather: {\n      key: weather.apiKey,\n      city: weather.city,\n      url: \"https://api.openweathermap.org/data/2.5/weather\"\n    },\n    unsplash: {\n      key: unsplash.apiKey,\n      utm: `utm_source=${unsplash.appName}&utm_medium=referral&utm_campaign=api-credit`,\n      url: \"https://api.unsplash.com/search/photos\"\n    },\n    ui: {\n      pageSize: 10\n    }\n  };\n};","import { clearChildren } from \"../utils\";\n\nclass Photo {\n  constructor($el) {\n    this.$el = $el;\n\n    this.display = this.display.bind(this);\n  }\n\n  // Clear the main image and load the supplied url\n  // Only mount the image once the file has loaded to let it fade in nicely\n  display(url, alt) {\n    clearChildren(this.$el);\n\n    const img = document.createElement(\"img\");\n    img.addEventListener(\"load\", () => {\n      // Take care of any async overruns (ghetto but effective!)\n      clearChildren(this.$el);\n      this.$el.appendChild(img);\n    });\n    img.src = url;\n    img.alt = alt;\n  }\n}\n\nexport default Photo;","import { clearChildren } from \"../utils\";\n\nclass Thumbs {\n  constructor($el, utm, displayMain) {\n    this.$el = $el;\n    this.utm = utm;\n\n    this.links = [];\n    this.displayMain = displayMain;\n    this.onLinkClick = this.onLinkClick.bind(this);\n  }\n\n  createThumb(parent, src, alt) {\n    const img = document.createElement(\"img\");\n\n    img.src = src;\n    img.alt = alt;\n    img.className = \"thumbs__thumb\";\n    img.addEventListener(\"load\", () => parent.appendChild(img));\n  }\n\n  onLinkClick(e) {\n    e.preventDefault();\n\n    const index = this.links.indexOf(event.currentTarget);\n    this.setActiveIndex(index)\n    this.displayMain(index);\n  }\n\n  setActiveIndex(index) {\n    this.links.forEach(link => {\n      link.classList.remove(\"active\");\n    });\n\n    this.links[index].classList.add(\"active\");\n  }\n\n  display(term, images) {\n    clearChildren(this.$el);\n\n    // We could use createDocumentFragment and event Delegation for perf\n    // improvements... but for simplicity we append children directly to this.$els.thumbs\n    // and add click event handlers directly\n    this.links = images.map((image) => {\n      const url = image.links.html;\n      const alt = image.description || term;\n      const thumbUrl = image.urls.thumb;\n\n      const anchor = document.createElement(\"a\");\n      anchor.href = `${url}?${this.utm}`;\n      anchor.className = \"thumbs__link\";\n      anchor.addEventListener(\"click\", this.onLinkClick);\n\n      this.createThumb(anchor, thumbUrl, alt);\n\n      return this.$el.appendChild(anchor);\n    });\n  }\n}\n\nexport default Thumbs;\n","const onGesture = swipeHandlers => (\n  touchstartX,\n  touchstartY,\n  touchendX,\n  touchendY\n) => {\n  if (touchendX < touchstartX) {\n    swipeHandlers[\"swipeLeft\"] && swipeHandlers[\"swipeLeft\"]();\n  }\n  if (touchendX > touchstartX) {\n    swipeHandlers[\"swipeRight\"] && swipeHandlers[\"swipeRight\"]();\n  }\n  if (touchendY < touchstartY) {\n    swipeHandlers[\"swipeDown\"] && swipeHandlers[\"swipeDown\"]();\n  }\n  if (touchendY > touchstartY) {\n    swipeHandlers[\"swipeUp\"] && swipeHandlers[\"swipeUp\"]();\n  }\n  if (touchendY === touchstartY) {\n    swipeHandlers[\"tap\"] && swipeHandlers[\"tap\"]();\n  }\n};\n\nexport default ($el, swipeHandlers) => {\n  const onTouchEnd = onGesture(swipeHandlers);\n\n  let touchstartX;\n  let touchstartY;\n  let touchendX;\n  let touchendY;\n\n  $el.addEventListener(\n    \"touchstart\",\n    function(event) {\n      touchstartX = event.changedTouches[0].screenX;\n      touchstartY = event.changedTouches[0].screenY;\n    },\n    false\n  );\n\n  $el.addEventListener(\n    \"touchend\",\n    function(event) {\n      touchendX = event.changedTouches[0].screenX;\n      touchendY = event.changedTouches[0].screenY;\n      onTouchEnd(touchstartX, touchstartY, touchendX, touchendY);\n    },\n    false\n  );\n};\n","import Search from \"./components/search\";\nimport Photo from \"./components/photo\";\nimport Thumbs from \"./components/thumbs\";\n\nimport swipe from \"./utils/swipe\";\n\nclass UI {\n  constructor(utm, city, cbs) {\n    // Cache references to DOM elements\n    this.$els = {\n      body: document.querySelector(\"body\"),\n      photo: document.querySelector(\"#photo\"),\n      thumbs: document.querySelector(\"#thumbs\"),\n      search: document.querySelector(\"#search\"),\n      creditUser: document.querySelector(\"#credit-user\"),\n      creditPlatform: document.querySelector(\"#credit-platform\")\n    };\n\n    // Bootstrap UI components\n    this.photo = new Photo(this.$els.photo);\n    this.thumbs = new Thumbs(this.$els.thumbs, utm, cbs.setActiveIndex);\n    this.search = new Search(this.$els.search, city, cbs.loadWeatherImages);\n    this.initPlatformCredits(utm);\n\n    // Bind keyboard events\n    document.onkeydown = this.onKeyDown.bind(this);\n    this.keyBindings = {\n      ArrowRight: cbs.moveToIndex(\"next\"),\n      ArrowLeft: cbs.moveToIndex(\"prev\")\n    };\n\n    // Handle swipe gestures\n    swipe(this.$els.photo, {\n      swipeLeft: cbs.moveToIndex(\"prev\"),\n      swipeRight: cbs.moveToIndex(\"next\")\n    });\n  }\n\n  displayThumbs(term, images) {\n    this.currentTerm = term;\n    this.thumbs.display(this.currentTerm, images);\n  }\n\n  displayMain(index, image) {\n    const { user, urls, color, description } = image;\n\n    this.thumbs.setActiveIndex(index);\n    this.photo.display(urls.regular, description || this.currentTerm);\n    this.updateUserCredit(this.currentTerm, user);\n    this.$els.body.style[\"backgroundColor\"] = color;\n  }\n\n  // INITIALISE\n  onKeyDown(e) {\n    const fn = this.keyBindings[e.code];\n    if (fn) fn();\n  }\n\n  initPlatformCredits(utm) {\n    this.$els.creditPlatform.href = `https://unsplash.com/?${utm}`;\n  }\n\n  updateUserCredit(term, user) {\n    this.$els.creditUser.href = `${user.links.html}?${this.utm}`;\n    this.$els.creditUser.innerText = `\"${term}\" by ${user.name}`;\n  }\n}\n\nexport default UI;\n","import API from \"./data/api\";\nimport UI from \"./ui\";\nimport { getConfig } from \"./utils\";\n\nclass App {\n  constructor(userConfig) {\n    // Merge user-supplied values (api keys, etc.) into config\n    this.config = getConfig(userConfig);\n    const { city } = this.config.weather;\n    const { utm } = this.config.unsplash;\n\n    // Bind callbacks as ncessary\n    this.loadWeatherImages = this.loadWeatherImages.bind(this);\n    this.onWeatherImagesLoaded = this.onWeatherImagesLoaded.bind(this);\n    this.setActiveIndex = this.setActiveIndex.bind(this);\n    this.moveToIndex = this.moveToIndex.bind(this);\n\n    // Bootstrap UI components\n    this.ui = new UI(utm, city, {\n      setActiveIndex: this.setActiveIndex,\n      loadWeatherImages: this.loadWeatherImages,\n      moveToIndex: this.moveToIndex\n    });\n    this.api = new API(this.config, this.onWeatherImagesLoaded);\n\n    // Autoload default city images\n    this.loadWeatherImages(city);\n  }\n\n  loadWeatherImages(city) {\n    this.activeIndex = 0;\n    this.api.load(city);\n  }\n\n  onWeatherImagesLoaded({ term, images }) {\n    this.images = images;\n    this.ui.displayThumbs(term, images)\n    this.setActiveIndex(0);\n  }\n\n  moveToIndex(dir) {\n    const { pageSize } = this.config.ui;\n    let n;\n\n    return () => {\n      n = dir === \"next\" ? this.activeIndex + 1 : this.activeIndex - 1;\n      n = n >= 0 ? n : n + pageSize;\n      this.setActiveIndex(n % pageSize);\n    };\n  }\n\n  setActiveIndex(index) {\n    this.activeIndex = index;\n\n    const image = this.images[this.activeIndex];\n    this.ui.displayMain(this.activeIndex, image);\n  }\n}\n\nexport default App;\n"],"names":[],"mappings":"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"}